<html>
  <head>
    <title>Text to Speech</title>
    <script src="/src/utils.js"></script>
    <!-- https://github.com/surrsurus/text-to-ipa -->
    <script src="/src/text-to-ipa.js"></script>
    <!-- https://github.com/EdThePro101/js-markov -->
    <script src="/src/markov.js"></script>
    <style>
      body {
        background: #111;
        color: #ffe600;
        font-family: 'Segoe UI', 'Arial', sans-serif;
        margin: 0;
        min-height: 100vh;
      }
      nav, a {
        color: #39ff14;
        text-shadow: 0 0 4px #39ff14;
        font-weight: bold;
      }
      nav {
        background: rgba(34,34,34,0.95);
        padding: 0.7em 1.5em;
        border-bottom: 2px solid #39ff14;
        box-shadow: 0 2px 12px #39ff14;
        margin-bottom: 1.5em;
      }
      a:hover {
        color: #fff;
        text-shadow: 0 0 8px #ffe600, 0 0 16px #39ff14;
      }
      button {
        background: #111;
        color: #ffe600;
        border: 2px solid #39ff14;
        border-radius: 6px;
        box-shadow: 0 0 8px #39ff14, 0 0 2px #ffe600;
        padding: 0.5em 1.2em;
        margin: 0.3em 0;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      }
      button:hover {
        background: #ffe600;
        color: #111;
        box-shadow: 0 0 16px #ffe600, 0 0 8px #39ff14;
      }
      input, select, textarea {
        background: #222;
        color: #ffe600;
        border: 1.5px solid #39ff14;
        border-radius: 4px;
        box-shadow: 0 0 4px #39ff14;
        margin: 0.2em 0;
        padding: 0.3em;
      }
      ::selection {
        background: #ffe600;
        color: #111;
      }
      /* Neon border for main content */
      body > *:not(nav) {
        border-radius: 10px;
        box-shadow: 0 0 24px #ffe60044, 0 0 8px #39ff1444;
        margin: 1.5em auto;
        max-width: 900px;
        padding: 1.5em 2em;
        background: rgba(20,20,20,0.92);
      }
    </style>
  </head>

  <style>
    .valid {
      color: green;
      font-weight: bold;
    }
    #validPhonemes > span {
      margin-right: 10px;
      display: inline-block;
    }
  </style>

  <body>
    <nav>
      <a href="../../">home</a>
    </nav>
    <h1>Tosi Ki Rea</h1>

    <textarea id="text" cols="70" placeholder="text"></textarea>
    <p id="validText"></p>
    <label
      >phoneme substitutions
      <select id="phonemeSubstitutions">
        <option>none</option>
      </select></label
    >
    <br /><br />
    <label
      >number of random phonemes <input id="numberOfRandomPhonemes" type="number" min="1" max="100" value="10" step="1"
    /></label>
    <button id="generateRandomPhonemes">generate</button>
    <br /><br />
    <label>pig latin <input id="pigLatin" type="checkbox" /></label>
    <br /><br />
    <textarea id="phonemes" cols="70" placeholder="phonemes"></textarea>
    <p id="validPhonemes"></p>
    <div id="controls">
      <label>speed <input type="number" value="1" id="speed" step="0.1" min="0.1" max="5" /></label>
      <label>frequency <input type="number" value="140" id="initialFrequency" step="1" min="20" max="990" /></label>
      <label>tract <input type="number" value="44" id="initialTractLength" step="1" min="15" max="88" /></label>
      <button id="play" disabled>play all</button>
      <label>70-voice <input oninput="onWhisperInput(event)" type="checkbox" /></label>
      <button id="download" disabled>download all</button>
      <a id="downloadLink" hidden></a>
    </div>
    <br />
    <div id="results" style="display: flex; flex-direction: column">
      <template id="resultTemplate">
        <div class="result">
          <b class="word"></b>
          <label style="margin-left:10px;">frequency (Hz)
            <input class="word-frequency" type="number" value="140" min="20" max="990" step="1" style="width:70px;" />
          </label>
          <div class="alternatives" style="display: flex; flex-direction: row"></div>
          <br />
          <div class="phonemes" style="display: flex; flex-direction: column"></div>
          <br />
          <button class="play">play</button>
          <br />
          <br />
        </div>
      </template>
      <template id="phonemeTemplate">
        <div class="phoneme">
          <span class="text" style="margin-right: 5px"></span>
          <label
            >intensity
            <input class="intensity" type="number" value="1" min="0" max="1" step="0.1" />
          </label>
          <label
            >offset
            <input class="offset" type="number" value="0.1" min="0.05" max="2" step="0.05" />
          </label>
          <label>hold <input class="hold" type="number" value="0" min="0" max="2" step="0.01" /></label>

          <label>semitones <input class="semitones" type="number" value="0" step="1" max="100" min="-100" /></label>

          <label>tract <input class="tractLength" type="number" value="0" step="1" min="0" max="88" /></label>

          <label
            >sub offset <input class="offsetBetweenSubPhonemes" type="number" value="0.01" min="0" max="1" step="0.01"
          /></label>
        </div>
      </template>
      <template id="alternativeTemplate">
        <div class="alternative" style="margin-right: 10px">
          <label><span></span> <input type="radio" /></label>
        </div>
      </template>
    </div>
  </body>
  <script src="/tts/src/script.js"></script>
</html>
