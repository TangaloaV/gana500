<html>
  <head>
    <title>KNN</title>
    <style>
      body {
        background: #111;
        color: #ffe600;
        font-family: 'Segoe UI', 'Arial', sans-serif;
        margin: 0;
        min-height: 100vh;
      }
      nav, a {
        color: #39ff14;
        text-shadow: 0 0 4px #39ff14;
        font-weight: bold;
      }
      nav {
        background: rgba(34,34,34,0.95);
        padding: 0.7em 1.5em;
        border-bottom: 2px solid #39ff14;
        box-shadow: 0 2px 12px #39ff14;
        margin-bottom: 1.5em;
      }
      a:hover {
        color: #fff;
        text-shadow: 0 0 8px #ffe600, 0 0 16px #39ff14;
      }
      button {
        background: #111;
        color: #ffe600;
        border: 2px solid #39ff14;
        border-radius: 6px;
        box-shadow: 0 0 8px #39ff14, 0 0 2px #ffe600;
        padding: 0.5em 1.2em;
        margin: 0.3em 0;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      }
      button:hover {
        background: #ffe600;
        color: #111;
        box-shadow: 0 0 16px #ffe600, 0 0 8px #39ff14;
      }
      input, select {
        background: #222;
        color: #ffe600;
        border: 1.5px solid #39ff14;
        border-radius: 4px;
        box-shadow: 0 0 4px #39ff14;
        margin: 0.2em 0;
        padding: 0.3em;
      }
      ::selection {
        background: #ffe600;
        color: #111;
      }
      /* Neon border for main content */
      body > *:not(nav) {
        border-radius: 10px;
        box-shadow: 0 0 24px #ffe60044, 0 0 8px #39ff1444;
        margin: 1.5em auto;
        max-width: 900px;
        padding: 1.5em 2em;
        background: rgba(20,20,20,0.92);
      }
    </style>
  </head>
  <style>
    .selected {
      background-color: lightblue;
    }
    .prediction {
      background-color: lightgreen;
    }
    #topPrediction {
      font-weight: bold;
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 100px;
    }
    #sendFlags > label {
      margin-right: 15px;
    }
  </style>

  <body>
    <nav>
      <a href="../../">home</a>
    </nav>
    <span id="topPrediction"></span>
    <button id="toggleMicrophone" disabled>enable microphone</button>
    <br />
    <canvas width="500" height="200" id="spectrum"></canvas>
    <br />
    <input type="number" min="1" max="10" step="0.5" oninput="gainNode.gain.value = event.target.value" value="1" />
    <button id="addClassification">add class</button>
    <button id="train" disabled>train</button>
    <button id="predict" disabled>predict</button>
    <button id="loadClassificationsFromLocalstorage" disabled>load data from localstorage</button>
    <button id="clearLocalstorage" disabled>clear localstorage</button>
    <button id="downloadLocalstorage" disabled>download data</button>
    <a id="downloadLink" hidden></a>
    <br />
    <label>upload data <input type="file" accept="application/JSON" id="uploadClassifications" /></label>
    <br />
    <br />
    <div id="classifications" style="display: flex; flex-direction: column-reverse; overflow-y: scroll; height: 400px">
      <template>
        <div class="classification" style="display: flex; align-items: center">
          <input type="text" size="8" class="name" />
          <span style="margin-left: 5px"
            ><span class="sampleIndex">0</span>/<span class="numberOfSamples">0</span></span
          >
          <canvas width="200" height="50" class="mfcc"></canvas>
          <button class="pt">pt</button>
          <button class="addData">add data</button>
          <button class="rePT">re-pt</button>
          <button class="clear">clear</button>
          <button class="delete">delete</button>
          <span class="ranking" style="width: 2em; padding-left: 10px"></span>
          <span class="percentage" style="width: 3em"></span>
        </div>
      </template>
    </div>
    <div id="sendFlags">
      <label
        >pink trombone <input type="checkbox" checked oninput="shouldSendToPinkTrombone = event.target.checked"
      /></label>
      <label>game <input type="checkbox" oninput="shouldSendToGame = event.target.checked" /></label>
      <label>lip sync <input type="checkbox" oninput="shouldSendToLipSync = event.target.checked" /></label>
      <label>pronunciation <input type="checkbox" oninput="shouldSendToPronunciation = event.target.checked" /></label>
    </div>
  </body>
  <script src="/src/ml5.min.js"></script>
  <script src="/src/utils.js"></script>

  <script src="/knn/src/script.js"></script>

  <script src="/src/essentia.js"></script>
  <script src="/src/ringbuf.js"></script>
  <script src="/src/meyda.min.js"></script>
  <script src="/src/meyda.js"></script>
</html>
